/*! grafana - v2.6.0 - 2015-12-14
 * Copyright (c) 2015 Torkel Ã–degaard; Licensed Apache-2.0 */

define(["require","exports","../query_def","test/specs/helpers","test/lib/common"],function(a,b,c,d,e){e.describe("ElasticQueryDef",function(){e.describe("getPipelineAggOptions",function(){e.describe("with zero targets",function(){var a=c.getPipelineAggOptions([]);e.it("should return zero",function(){e.expect(a.length).to.be(0)})}),e.describe("with count and sum targets",function(){var a={metrics:[{type:"count",field:"@value"},{type:"sum",field:"@value"}]},b=c.getPipelineAggOptions(a);e.it("should return zero",function(){e.expect(b.length).to.be(2)})}),e.describe("with count and moving average targets",function(){var a={metrics:[{type:"count",field:"@value"},{type:"moving_avg",field:"@value"}]},b=c.getPipelineAggOptions(a);e.it("should return one",function(){e.expect(b.length).to.be(1)})}),e.describe("with derivatives targets",function(){var a={metrics:[{type:"derivative",field:"@value"}]},b=c.getPipelineAggOptions(a);e.it("should return zero",function(){e.expect(b.length).to.be(0)})})}),e.describe("isPipelineMetric",function(){e.describe("moving_avg",function(){var a=c.isPipelineAgg("moving_avg");e.it("is pipe line metric",function(){e.expect(a).to.be(!0)})}),e.describe("count",function(){var a=c.isPipelineAgg("count");e.it("is not pipe line metric",function(){e.expect(a).to.be(!1)})})}),e.describe("pipeline aggs depending on esverison",function(){e.describe("using esversion undefined",function(){e.it("should not get pipeline aggs",function(){e.expect(c.getMetricAggTypes(void 0).length).to.be(9)})}),e.describe("using esversion 1",function(){e.it("should not get pipeline aggs",function(){e.expect(c.getMetricAggTypes(1).length).to.be(9)})}),e.describe("using esversion 2",function(){e.it("should get pipeline aggs",function(){e.expect(c.getMetricAggTypes(2).length).to.be(11)})})})})});