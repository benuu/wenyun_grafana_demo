/*! grafana - v2.6.0 - 2015-12-14
 * Copyright (c) 2015 Torkel Ã–degaard; Licensed Apache-2.0 */

define(["require","exports","angular","lodash","app/core/utils/kbn","./transformers"],function(a,b,c,d,e,f){function g(){"use strict";return{restrict:"E",scope:!0,templateUrl:"app/panels/table/editor.html",controller:h}}var h=function(){function a(a,b,g){a.transformers=f.transformers,a.unitFormats=e.getUnitFormats(),a.colorModes=[{text:"Disabled",value:null},{text:"Cell",value:"cell"},{text:"Value",value:"value"},{text:"Row",value:"row"}],a.columnTypes=[{text:"Number",value:"number"},{text:"String",value:"string"},{text:"Date",value:"date"}],a.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],a.dateFormats=[{text:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{text:"MM/DD/YY h:mm:ss a",value:"MM/DD/YY h:mm:ss a"},{text:"MMMM D, YYYY LT",value:"MMMM D, YYYY LT"}],a.addColumnSegment=g.newPlusButton(),a.getColumnOptions=function(){if(!a.dataRaw)return b.when([]);var c=f.transformers[a.panel.transform].getColumns(a.dataRaw),e=d.map(c,function(a){return g.newSegment({value:a.text})});return b.when(e)},a.addColumn=function(){var b=f.transformers[a.panel.transform].getColumns(a.dataRaw),c=d.findWhere(b,{text:a.addColumnSegment.value});c&&(a.panel.columns.push(c),a.render());var e=g.newPlusButton();a.addColumnSegment.html=e.html,a.addColumnSegment.value=e.value},a.transformChanged=function(){a.panel.columns=[],a.render()},a.removeColumn=function(b){a.panel.columns=d.without(a.panel.columns,b),a.render()},a.setUnitFormat=function(b,c){b.unit=c.value,a.render()},a.addColumnStyle=function(){var b={unit:"short",type:"number",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],colorMode:null,pattern:"/.*/",dateFormat:"YYYY-MM-DD HH:mm:ss",thresholds:[]};a.panel.styles.push(c.copy(b))},a.removeColumnStyle=function(b){a.panel.styles=d.without(a.panel.styles,b)},a.getColumnNames=function(){return a.table?d.map(a.table.columns,function(a){return a.text}):[]},a.invertColorOrder=function(b){var c=a.panel.styles[b].colors,d=c[0];c[0]=c[2],c[2]=d,a.render()}}return a.$inject=["$scope","$q","uiSegmentSrv"],a}();b.TablePanelEditorCtrl=h,b.tablePanelEditor=g});